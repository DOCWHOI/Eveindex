# 风险监控系统项目说明

## 项目概述

风险监控系统是一个专为医疗器械行业设计的综合风险管理平台，旨在通过多维度数据收集、智能风险分析和实时预警机制，帮助企业及时识别和应对全球范围内的监管风险。

## 系统架构

### 整体架构
```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   前端层        │    │   后端层        │    │   数据层        │
│  (Vue3 + AntD)  │◄──►│ (Spring Boot)   │◄──►│   (MySQL)       │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                              │
                              ▼
                       ┌─────────────────┐
                       │   数据收集层     │
                       │ (API/爬虫/文件)  │
                       └─────────────────┘
```

### 技术栈选择

#### 前端技术栈
- **Vue 3**: 采用 Composition API，提供更好的 TypeScript 支持和逻辑复用
- **Ant Design Vue**: 企业级 UI 组件库，提供丰富的组件和设计规范
- **TypeScript**: 类型安全，提高代码质量和开发效率
- **Vite**: 快速的构建工具，支持热更新
- **Vue Router**: 单页应用路由管理

#### 后端技术栈
- **Spring Boot 2.7.18**: 成熟的 Java 企业级框架
- **MyBatis Plus**: 增强的 ORM 框架，简化数据库操作
- **MySQL 8.0**: 关系型数据库，存储结构化数据
- **Lombok**: 减少样板代码，提高开发效率
- **Druid**: 阿里巴巴开源的数据库连接池

## 核心功能模块

### 1. Pre-market风险评估模块

#### 功能描述
在医疗器械进入市场前，对潜在风险进行全面评估，包括竞争对手分析、HS编码合规性检查、监管要求对比等。

#### 核心算法
```
风险总分 = 竞争对手风险 × 30% + HS编码风险 × 25% + 监管语义风险 × 25% + 违规记录风险 × 20%
```

#### 风险等级判定
- **高风险 (≥80分)**: 建议暂停出口，需要进一步评估
- **中风险 (60-79分)**: 建议申请预审批，加强合规检查
- **低风险 (<60分)**: 可以正常出口，定期监控

#### 决策建议
- **禁止出口**: 风险等级为高风险，且存在严重违规记录
- **申请预审批**: 风险等级为中风险，需要监管部门预审
- **正常出口**: 风险等级为低风险，符合出口条件
- **完成认证**: 需要补充相关认证文件

### 2. Post-market动态监控模块

#### 监控信号
1. **政府召回公告**: 实时监控 FDA、NMPA、EUDAMED 等官方召回信息
2. **HS编码变更**: 跟踪各国 HS 编码分类标准的变化
3. **设备活跃度**: 监控 DAU（日活跃用户）和 WAU（周活跃用户）变化
4. **投诉退货**: 分析客户投诉和退货数据趋势

#### 预警机制
- **阈值设置**: 可配置的预警阈值（如 DAU 下降 20%）
- **实时监控**: 24/7 不间断监控，及时发现异常
- **分级预警**: 根据风险程度分为高、中、低三个等级
- **邮件通知**: 自动发送预警邮件给相关人员

### 3. 数据查询与管理模块

#### 数据源集成
- **官方API**: FDA、NMPA、EUDAMED 等官方数据接口
- **网络爬虫**: 针对中国、韩国等国家的网页数据抓取
- **文件解析**: 澳大利亚、巴西等国家的文件数据解析
- **手动录入**: 临时数据的手动录入功能

#### 数据管理功能
- **数据同步**: 定时同步各数据源的最新信息
- **数据清洗**: 统一格式、去重、关键词提取
- **Excel导入导出**: 支持批量数据导入和报告导出
- **数据验证**: 确保数据完整性和准确性

### 4. 预警与报告中心

#### 预警管理
- **预警记录**: 完整记录所有预警事件和处理状态
- **处理流程**: 支持预警的查看、处理、关闭等操作
- **统计分析**: 预警趋势分析和统计报表

#### 报告生成
- **自动报告**: 周报、月报的自动生成
- **自定义报告**: 支持按时间、国家、风险类型等条件生成报告
- **多种格式**: 支持在线查看、PDF下载、Excel导出

## 数据库设计

### 核心表结构

#### 1. country (国家信息表)
```sql
CREATE TABLE country (
    country_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL COMMENT '国家名称',
    code VARCHAR(10) NOT NULL COMMENT '国家代码',
    regulatory_level VARCHAR(20) COMMENT '监管严格程度',
    description TEXT COMMENT '国家描述',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

#### 2. competitor (竞争对手表)
```sql
CREATE TABLE competitor (
    comp_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(200) NOT NULL COMMENT '竞争对手名称',
    product_type VARCHAR(100) COMMENT '产品类型',
    description TEXT COMMENT '描述信息',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

#### 3. pre_market_risk (Pre-market风险评估表)
```sql
CREATE TABLE pre_market_risk (
    risk_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    country_id BIGINT NOT NULL COMMENT '国家ID',
    comp_id BIGINT COMMENT '竞争对手ID',
    comp_score INT COMMENT '竞争对手风险分数',
    hs_code_score INT COMMENT 'HS编码风险分数',
    regulatory_score INT COMMENT '监管语义风险分数',
    violation_score INT COMMENT '违规记录风险分数',
    total_score INT COMMENT '总风险分数',
    risk_level VARCHAR(20) COMMENT '风险等级',
    decision VARCHAR(50) COMMENT '决策建议',
    description TEXT COMMENT '评估描述',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

#### 4. early_warning (预警记录表)
```sql
CREATE TABLE early_warning (
    warning_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    country_id BIGINT NOT NULL COMMENT '国家ID',
    warning_type VARCHAR(50) NOT NULL COMMENT '预警类型',
    trigger_value VARCHAR(200) COMMENT '触发值',
    threshold VARCHAR(200) COMMENT '阈值',
    status VARCHAR(20) DEFAULT 'pending' COMMENT '处理状态',
    description TEXT COMMENT '预警描述',
    email_log TEXT COMMENT '邮件发送记录',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

## API 接口设计

### RESTful API 规范

#### 风险评估接口
```
POST /api/risk-assessment/calculate
GET  /api/risk-assessment/history
POST /api/risk-assessment/save
```

#### 监控数据接口
```
GET /api/monitor/dashboard
GET /api/monitor/country/{countryCode}
GET /api/monitor/warnings
```

#### 数据管理接口
```
GET  /api/data/sources
POST /api/data/sync
POST /api/data/import
GET  /api/data/export
```

#### 预警报告接口
```
GET  /api/warning/list
POST /api/warning/process
GET  /api/report/generate
GET /api/report/download
```

## 部署方案

### 开发环境
- **前端**: Node.js 16+, npm 8+
- **后端**: Java 8+, Maven 3.6+
- **数据库**: MySQL 8.0+
- **操作系统**: Windows/Linux/macOS

### 生产环境
- **Web服务器**: Nginx
- **应用服务器**: Tomcat 9+
- **数据库**: MySQL 8.0 集群
- **缓存**: Redis
- **监控**: Prometheus + Grafana

### 容器化部署
```dockerfile
# 前端 Dockerfile
FROM node:16-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build
EXPOSE 3000
CMD ["npm", "run", "preview"]
```

```dockerfile
# 后端 Dockerfile
FROM openjdk:8-jre-alpine
WORKDIR /app
COPY target/*.jar app.jar
EXPOSE 8080
CMD ["java", "-jar", "app.jar"]
```

## 安全考虑

### 数据安全
- **数据加密**: 敏感数据使用 AES 加密存储
- **访问控制**: 基于角色的权限控制 (RBAC)
- **审计日志**: 完整的操作日志记录
- **数据备份**: 定期自动备份重要数据

### 网络安全
- **HTTPS**: 强制使用 HTTPS 协议
- **CORS**: 配置跨域资源共享策略
- **API限流**: 防止 API 滥用
- **防火墙**: 网络层安全防护

## 性能优化

### 前端优化
- **代码分割**: 按路由分割代码，减少首屏加载时间
- **懒加载**: 图片和组件的懒加载
- **缓存策略**: 合理的缓存策略减少请求
- **CDN**: 静态资源使用 CDN 加速

### 后端优化
- **数据库优化**: 索引优化、查询优化
- **连接池**: 使用 Druid 连接池管理数据库连接
- **缓存**: Redis 缓存热点数据
- **异步处理**: 耗时操作异步处理

## 监控与运维

### 系统监控
- **应用监控**: Spring Boot Actuator
- **数据库监控**: MySQL 性能监控
- **服务器监控**: CPU、内存、磁盘使用率
- **日志监控**: ELK 日志分析

### 告警机制
- **邮件告警**: 系统异常邮件通知
- **短信告警**: 重要异常短信通知
- **钉钉/企业微信**: 集成企业通讯工具

## 扩展性设计

### 水平扩展
- **负载均衡**: Nginx 负载均衡
- **数据库读写分离**: 主从复制
- **缓存集群**: Redis 集群
- **微服务架构**: 服务拆分和独立部署

### 功能扩展
- **插件机制**: 支持功能插件扩展
- **API 版本控制**: 支持 API 版本管理
- **多租户**: 支持多租户架构
- **国际化**: 支持多语言

## 开发规范

### 代码规范
- **前端**: ESLint + Prettier
- **后端**: Checkstyle + SpotBugs
- **Git**: 统一的提交信息格式
- **文档**: 完整的 API 文档和代码注释

### 测试规范
- **单元测试**: 核心业务逻辑单元测试
- **集成测试**: API 接口集成测试
- **端到端测试**: 完整业务流程测试
- **性能测试**: 系统性能压力测试

## 项目时间线

### 第一阶段 (1-2周)
- [x] 项目架构搭建
- [x] 基础框架集成
- [x] 数据库设计
- [x] 核心实体类创建

### 第二阶段 (3-4周)
- [ ] 前端页面开发
- [ ] 后端 API 开发
- [ ] 数据收集模块
- [ ] 风险评估算法

### 第三阶段 (5-6周)
- [ ] 监控预警功能
- [ ] 报告生成功能
- [ ] 系统集成测试
- [ ] 性能优化

### 第四阶段 (7-8周)
- [ ] 安全加固
- [ ] 部署上线
- [ ] 用户培训
- [ ] 运维监控

## 风险评估

### 技术风险
- **第三方依赖**: 依赖库的安全性和稳定性
- **数据准确性**: 数据收集的准确性和及时性
- **系统性能**: 大数据量下的系统性能
- **兼容性**: 不同浏览器和设备的兼容性

### 业务风险
- **监管变化**: 各国监管政策的变化
- **数据源稳定性**: 官方数据源的可用性
- **用户接受度**: 用户对新系统的接受程度
- **竞争压力**: 同类产品的竞争

### 风险缓解措施
- **技术选型**: 选择成熟稳定的技术栈
- **数据备份**: 多重数据备份和恢复机制
- **性能测试**: 充分的性能测试和优化
- **用户培训**: 完善的用户培训和文档

## 总结

风险监控系统是一个综合性的医疗器械风险管理平台，通过先进的技术架构和智能的算法模型，为企业提供全方位的风险监控和预警服务。系统具有良好的扩展性和可维护性，能够适应不断变化的业务需求和监管环境。